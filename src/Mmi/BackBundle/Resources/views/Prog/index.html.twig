{% extends "::baseuser.html.twig" %}
{% block content %}
    <div class="row">
<div id="playlist" class="col-xs-1">
    {% for playlist in playlists %}
        {% set i= loop.index0 %}
        <div class='fc-event' draggable="true" ondragstart="drag(event)" id="{{ i }}">{{ playlist.plNom }}</div>
    {% endfor %}
</div>
    </div>
<table>
    <tr><td></td><td>Lundi</td><td>Mardi</td><td>Mercredi</td><td>Jeudi</td><td>Vendredi</td></tr>
    <tr><td class="hour" ondrop="drop(event)" ondragover="allowDrop(event)">7h50 - 9h20</td><td id="Mon1" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td><td id="Tue1" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td><td id="Wen1" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td><td id="Thu1" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td><td id="Fri1" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td></tr>
    <tr><td class="hour" ondrop="drop(event)" ondragover="allowDrop(event)">9h20 - 10h50</td><td id="Mon2" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td><td id="Tue2" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td><td id="Wen2" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td><td id="Thu1" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td><td id="Fri2" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td></tr>
    <tr><td class="hour" ondrop="drop(event)" ondragover="allowDrop(event)">10h50 - 12h20</td><td id="Mon3" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td><td id="Tue3" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td><td id="Wen3" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td><td id="Thu1" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td><td id="Fri3" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td></tr>
    <tr><td class="hour" ondrop="drop(event)" ondragover="allowDrop(event)">12h20 - 14h10</td><td id="Mon4" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td><td id="Tue4" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td><td id="Wen4" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td><td id="Thu1" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td><td id="Fri4" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td></tr>
    <tr><td class="hour" ondrop="drop(event)" ondragover="allowDrop(event)">14h10 - 15h40</td><td id="Mon5" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td><td id="Tue5" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td><td id="Wen5" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td><td id="Thu1" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td><td id="Fri5" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td></tr>
    <tr><td class="hour" ondrop="drop(event)" ondragover="allowDrop(event)">15h40 - 17h10</td><td id="Mon6" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td><td id="Tue6" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td><td id="Wen6" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td><td id="Thu1" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td><td id="Fri6" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td></tr>
    <tr><td class="hour" ondrop="drop(event)" ondragover="allowDrop(event)">17h10 - 18h40</td><td id="Mon7" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td><td id="Tue7" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td><td id="Wen7" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td><td id="Thu1" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td><td id="Fri7" class="hour" ondrop="drop(event)" ondragover="allowDrop(event)"></td></tr>
</table>
    <input type="button" id="valid" value="Valider le programme">
<style>
    .hour {
        width: 150px;
        height: 50px;

    }

    body {
        background-color: white;
    }

    .fc-event {
        cursor: pointer;
        background-color: #006dcc;
        color: #f5f5f5;
        margin:10px;
        position: relative;
    }

    #playlist {

    }

    td {
        border: 1px solid black;
    }
</style>

{% endblock %}
{% block script %}
<script>
    function allowDrop(ev) {
        ev.preventDefault();
    }

    function drag(ev) {
        ev.dataTransfer.setData("text", ev.target.id);
    }

    function drop(ev) {
        ev.preventDefault();
        var data = ev.dataTransfer.getData("text");
        ev.target.appendChild(document.getElementById(data));
    }
    $('document').ready(function(){

    $('#valid').click(function(){
      var tab =  new Array($('#Mon1').text(),
        $('#Mon2').text(),
        $('#Mon3').text(),
        $('#Mon4').text(),
        $('#Mon5').text(),
        $('#Mon6').text(),
        $('#Mon7').text(),
        $("#Tue1").text(),
        $("#Tue2").text(),
        $("#Tue3").text(),
        $("#Tue4").text(),
        $("#Tue5").text(),
        $("#Tue6").text(),
        $("#Tue7").text(),
        $("#Wen1").text(),
        $("#Wen2").text(),
        $("#Wen3").text(),
        $("#Wen4").text(),
        $("#Wen5").text(),
        $("#Wen6").text(),
        $("#Wen7").text(),
        $("#Thu1").text(),
        $("#Thu2").text(),
        $("#Thu3").text(),
        $("#Thu4").text(),
        $("#Thu5").text(),
        $("#Thu6").text(),
        $("#Thu7").text(),
        $("#Fri1").text(),
        $("#Fri2").text(),
        $("#Fri3").text(),
        $("#Fri4").text(),
        $("#Fri5").text(),
        $("#Fri6").text(),
        $("#Fri7").text());
        var tmp = JSON.stringify(tab);
        var tmp2=tmp.replace(/"/g,'\'');

        console.log(tmp2);
        $.ajax({
            url: "{{ path('prog_update')  }}",
            type:"POST",
            dataType: 'json',
            data: {'json': tmp2},
            success:function(){        console.log('lol');
            }
        });
        console.log({'json': tmp2});

    });
    });
</script>
{% endblock %}
